# Fontions de l'API d'authentification - DEV ONLY (inclus sous /millegrilles en prod)

# Chargement de l'application React /millegrilles
location = /millegrilles {
 proxy_pass        http://192.168.1.131:3002;
 proxy_set_header  X-Real-IP $remote_addr;
 proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header  X-Forwarded-Proto $scheme;
}
location /millegrilles/static {
 proxy_pass        http://192.168.1.131:3002;
 proxy_set_header  X-Real-IP $remote_addr;
 proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header  X-Forwarded-Proto $scheme;
}

# Chargement de /coupdoeil
location = /coupdoeil {
 # Protection via auth plugin
 include /etc/nginx/conf.d/auth.include;

 proxy_pass        https://mg-dev4.maple.maceroc.com:3004;
 proxy_set_header  X-Real-IP $remote_addr;
 proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header  X-Forwarded-Proto $scheme;
}
location /coupdoeil/static {
 # Protection via auth plugin
 include /etc/nginx/conf.d/auth.include;

 proxy_pass        https://mg-dev4.maple.maceroc.com:3004;
 proxy_set_header  X-Real-IP $remote_addr;
 proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header  X-Forwarded-Proto $scheme;
}
